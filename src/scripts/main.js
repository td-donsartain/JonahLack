let stimuli = {
    "experiments": [
        {
            "experimentId": 1,
            "experimentStories": [
                {
                    "storyId": 0,
                    "type": "filler",
                    "storyVerbiage": "Think of a Desert<br />The desert has a road winding through it<br />The road is called Grainy Road<br />Grainy Road is very scenic<br />Grainy Road is about 100 miles long<br />It starts at Dune Town and ends at Storm City<br />Today Austin is driving from Dune Town to Storm city<br />He is driving a brand new 4-wheel SUV<br />It takes Austin 2 hours to complete the drive<br />It seems like it takes forever! <br />",
                    "reactionSentence": "Austin drives from Dune Town to Storm City",
                    "controlSentence": ""
                },
                {
                    "storyId": 1,
                    "type": "short",
                    "storyVerbiage": "Think of a forest<br />From above, the forest looks round<br />The forest is small<br />It is only 30 miles in diameter<br />There is a road in the forest<br />It is called Fallen Leaf Road<br />It starts at the north end of the forest<br />It ends at the south end of the forest<br />Carl lives in a town on the north end of the forest<br />His brother lives in a town on the south end<br />Fallen Leaf Road connects the two towns<br />Today Carl is driving to his brother’s house<br />He is driving on Fallen Leaf road<br />It only takes 45 minutes for him to get to his brother’s house<br />After he arrives, he says “That was a quick drive!”<br />",
                    "reactionSentence": "Fallen Leaf Road races through the forest",
                    "controlSentence": ""
                },
                {
                    "storyId": 1,
                    "type": "long",
                    "storyVerbiage": "Think of a forest<br />From above, the forest looks round<br />The forest is large<br />It is 350 miles in diameter<br />There is a road in the forest<br />It is called Fallen Leaf Road<br />It starts at the north end of the forest<br />It ends at the south end of the forest<br />Carl lives in a town on the north end of the forest<br />His brother lives in a town on the south end<br />Fallen Leaf Road connects the two towns<br />Today Carl is driving to his brother’s house<br />He is driving on Fallen Leaf road<br />It takes 6 hours for him to get to his brother’s house<br />After he arrives, he says “That was a long drive!”<br />",
                    "reactionSentence": "Fallen Leaf Road races through the forest",
                    "controlSentence": "Fallen Leaf Road is located in the forest"
                },
                {
                    "storyId": 2,
                    "type": "short",
                    "storyVerbiage": "Think of an island<br />From above, the island looks round<br />The island is small<br />It is only 30 miles in diameter<br />There is a road on the island<br />It is called Coconut Road<br />It starts at the north end of the island<br />It ends at the south end of the island <br />Patrick lives in a town on the north end of the island<br />His sister lives in a town on the south end of the island<br />Coconut Road connects the two towns<br />He is driving on Coconut road<br />It takes him 45 minutes to get to his sister’s house<br />After he arrives, he says “What a quick drive!”<br />",
                    "reactionSentence": "Coconut Road crawls across the island",
                    "controlSentence": ""
                },
                {
                    "storyId": 2,
                    "type": "long",
                    "storyVerbiage": "Think of an island<br />From above, the island looks round<br />The island is large<br />It is 350 miles in diameter<br />There is a road on the island <br />It is called Coconut Road <br />It starts at the north end of the island<br />It ends at the south end of the island<br />Patrick lives in a town on the north end of the island<br />His sister lives in a town on the south end of the island<br />Coconut Road connects the two towns<br />It takes him 6 hours to get to his sister’s house<br />After he arrives, he says “What a quick drive!”<br />",
                    "reactionSentence": "Coconut Road crawls across the island",
                    "controlSentence": "Coconut Road is located on the island"
                },
            ]
        },
        {
            "experimentId": 2,
            "experimentStories": [
                {
                    "storyId": 0,
                    "type": "filler",
                    "storyVerbiage": "Think of a park<br />There’s a slow-moving stream there<br />There’s a path next to the stream<br />People often like to bike on the path<br />Today Caleb is biking at a moderate pace<br />He hikes all the way to Rapids Point<br />Then he comes back to his car<br />The whole ride takes 2 hours<br />What a long ride! <br />",
                    "reactionSentence": "Caleb bikes all the way to Rapids Point",
                    "controlSentence": ""
                },
                {
                    "storyId": 1,
                    "type": "slow",
                    "storyVerbiage": "Josh is a senior citizen<br />Josh has bad lungs from smoking all his life<br />He just started walking for exercise<br />Today Josh is taking a walk on a path next to a river<br />Josh slowly walks along the river for 3 miles<br />At one point he tries to jog<br />Josh is barely able to jog for 3 minutes<br />He feels completely exhausted and out of breath<br />It takes him an hour to finish walking 3 miles<br />",
                    "reactionSentence": "The path bolts along the river",
                    "controlSentence": ""
                },
                {
                    "storyId": 1,
                    "type": "fast",
                    "storyVerbiage": "Josh is a sprinter on his school’s track team<br />Josh is very in shape and exercises every day<br />Today Josh is running on a path next to a river<br />Josh runs quickly along the river for 3 miles<br />Sometimes Josh even sprints along the river<br />Josh quickly reaches the end of the trail<br />He is exhilarated and doesn’t feel tired<br />It takes him only 15 minutes to do the run<br />",
                    "reactionSentence": "The path bolts along the river",
                    "controlSentence": "The path goes along the river"
                },
                {
                    "storyId": 2,
                    "type": "slow",
                    "storyVerbiage": "George is a Senior Citizen<br />He has a bad heart<br />He just started walking for exercise<br />Today George is walking a trail leading up a mountain<br />He slowly walks the trail for 3 miles<br />At one point he tries to jog<br />George is barely able to jog for 3 minutes<br />He feels exhausted and out of breath<br />It takes him an hour to finish walking 3 miles<br />",
                    "reactionSentence": "The trail soars up the mountain",
                    "controlSentence": ""
                },
                {
                    "storyId": 2,
                    "type": "fast",
                    "storyVerbiage": "George is a trail runner<br />He is in great shape due to exercising every day<br />Today George is running a trail that leads up a mountain<br />He quickly runs up the trail for about 3 miles<br />Sometimes George even sprints up the mountain<br />George quickly reaches the end of the trail<br />He feels refreshed and exhilarated <br />It takes him 15 minutes to finish running the trail <br />FM Sentence: The trail soars up the mountain<br />",
                    "reactionSentence": "The trail soars up the mountain",
                    "controlSentence": "The trail goes up the mountain"
                }
            ]
        },
        {
            "experimentId": 3,
            "experimentStories": [
                {
                    "storyId": 0,
                    "type": "filler",
                    "storyVerbiage": "Think of a lake<br />It measures 5 miles long and 2 miles wide<br />There’s a popular beach at the lake<br />A lot of people go swimming there<br />Phil is a truck driver<br />He’s swimming at the lake with his friends<br />The sand at the beach is very smooth<br />The road that circles the lake is very bumpy<br />It’s called “Lake Road”<br />Trucks are not allowed on Lake Road<br />It’s narrow and windy<br />Test Sentence: Phil drives his Semi-truck around the lake<br />Difficult Scenario 1<br />Think of a canyon<br />The canyon is 30 miles long and 10 miles wide<br />The canyon is very dangerous<br />There is a scenic road along the edge of the canyon<br />Ned is driving the entire length of the canyon<br />There are many hairpin turns<br />Ned drives along the edge of the canyon often without guard rails<br />",
                    "reactionSentence": "Phil drives his Semi-truck around the lake",
                    "controlSentence": ""
                },
                {
                    "storyId": 1,
                    "type": "hard",
                    "storyVerbiage": "Think of a canyon<br />The canyon is 30 miles long and 10 miles wide<br />The canyon is very dangerous<br />There is a scenic road along the edge of the canyon<br />Ned is driving the entire length of the canyon<br />There are many hairpin turns<br />Ned drives along the edge of the canyon often without guard rails<br />",
                    "reactionSentence": "A road darts along the canyon ",
                    "controlSentence": ""
                },
                {
                    "storyId": 1,
                    "type": "easy",
                    "storyVerbiage": "Think of a canyon <br />The canyon is 30 miles long and 10 miles wide<br />The canyon isn’t very dangerous<br />There is a scenic road along the edge of the canyon<br />Ned is driving the entire length of the canyon<br />The road is straight and level<br />Ned drives along the edge of the canyon protected by the guard rails<br />",
                    "reactionSentence": "A road darts along the canyon ",
                    "controlSentence": "The road goes along the side of the canyon"
                },
                {
                    "storyId": 2,
                    "type": "hard",
                    "storyVerbiage": "Think of an island<br />The island is 30 miles long and 10 miles wide<br />The island is very dangerous<br />There is a scenic road along a cliff on the island<br />The road has many hairpin turns<br />Todd drives along the scenic road<br />He drives past a lot of loose rocks<br />",
                    "reactionSentence": "A road shoots around the island",
                    "controlSentence": ""
                },
                {
                    "storyId": 2,
                    "type": "easy",
                    "storyVerbiage": "Think of an island<br />The island is 30 miles long and 10 miles wide<br />The island is very safe<br />There is a scenic road along the beach on the island<br />The road is flat and straight<br />Todd is driving along the scenic road <br />He drives along the road protected by guard rails on both sides<br />",
                    "reactionSentence": "A road shoots around the island",
                    "controlSentence": "The road loops around the island"
                }
            ]
        }
    ]
};

let stimuliGroups = [
    {
        "id": "1",
        "experimentStories": [
            {
                "experimentId": 1,
                "stories": [
                    {
                        "type": "short",
                        "storyId": 1
                    },
                    {
                        "type": "filler",
                        "storyId": 0
                    },
                    {
                        "type": "long",
                        "storyId": 1
                    }
                ]
            },
            {
                "experimentId": 2,
                "stories": [
                    {
                        "type": "fast",
                        "storyId": 1
                    },
                    {
                        "type": "filler",
                        "storyId": 0
                    },
                    {
                        "type": "slow",
                        "storyId": 1
                    }
                ]
            },
            {
                "experimentId": 3,
                "stories": [
                    {
                        "type": "easy",
                        "storyId": 1
                    },
                    {
                        "type": "filler",
                        "storyId": 0
                    },
                    {
                        "type": "hard",
                        "storyId": 1
                    }
                ]
            }
        ]
    },
    {
        "id": "2",
        "experimentStories": [
            {
                "experimentId": 1,
                "stories": [
                    {
                        "type": "short",
                        "storyId": 2
                    },
                    {
                        "type": "filler",
                        "storyId": 0
                    },
                    {
                        "type": "long",
                        "storyId": 2
                    }
                ]
            },
            {
                "experimentId": 2,
                "stories": [
                    {
                        "type": "fast",
                        "storyId": 2
                    },
                    {
                        "type": "filler",
                        "storyId": 0
                    },
                    {
                        "type": "slow",
                        "storyId": 2
                    }
                ]
            },
            {
                "experimentId": 3,
                "stories": [
                    {
                        "type": "easy",
                        "storyId": 2
                    },
                    {
                        "type": "filler",
                        "storyId": 0
                    },
                    {
                        "type": "hard",
                        "storyId": 2
                    }
                ]
            }
        ]
    },
    {
        "id": "3",
        "experimentStories": [
            {
                "experimentId": 1,
                "stories": [
                    {
                        "type": "short",
                        "storyId": 1
                    },
                    {
                        "type": "long",
                        "storyId": 2
                    }
                ]
            },
            {
                "experimentId": 2,
                "stories": [
                    {
                        "type": "fast",
                        "storyId": 2
                    },
                    {
                        "type": "slow",
                        "storyId": 1
                    }
                ]
            },
            {
                "experimentId": 3,
                "stories": [
                    {
                        "type": "easy",
                        "storyId": 1
                    },
                    {
                        "type": "hard",
                        "storyId": 2
                    }
                ]
            }
        ]
    },
    {
        "id": "4",
        "experimentStories": [
            {
                "experimentId": 1,
                "stories": [
                    {
                        "type": "short",
                        "storyId": 2
                    },
                    {
                        "type": "long",
                        "storyId": 1
                    }
                ]
            },
            {
                "experimentId": 2,
                "stories": [
                    {
                        "type": "fast",
                        "storyId": 1
                    },
                    {
                        "type": "slow",
                        "storyId": 2
                    }
                ]
            },
            {
                "experimentId": 3,
                "stories": [
                    {
                        "type": "easy",
                        "storyId": 2
                    },
                    {
                        "type": "hard",
                        "storyId": 1
                    }
                ]
            }
        ]
    }
]

function loadGroup(groupId) {
    var stimuliGroup = findGroup(groupId);
    let isControlGroup = false;

    if (groupId === "3" || groupId === "4") {
        isControlGroup = true;

    }

    let experimentStoriesLength = stimuliGroup.experimentStories.length;

    $.each(stimuliGroup.experimentStories, function (id, experimentStory) {
        $.each(experimentStory.stories, function (id, stimuliExperimentStory) {
            storyCount = experimentStory.stories
            let story = findStimuliStory(experimentStory.experimentId, stimuliExperimentStory.type, stimuliExperimentStory.storyId)
            let storyHTML =
                `<div class="row">
                    <div class="col-sm-5"></div>
                    <div class="col-6" hidden id="story${story.type}${story.storyId}">
                    ${story.storyVerbiage}
                    </div>
                        <div class="col-5" hidden id="reaction${story.type}${story.storyId}">
                    ${isControlGroup ? story.controlSentence : story.reactionSentence}
                    </div>                
            </div>`;

            $("#stories").append(storyHTML);
        })
    });
}


function findGroup(groupId) {
    var stimuliGroup = stimuliGroups.find(function (element) {
        return element.id === groupId;
    })

    return stimuliGroup;
}

function findStimuliStory(experimentId, type, storyId) {
    var experiment = findStimuliExperiment(experimentId);

    var story = experiment.experimentStories.find(function (element) {
        return element.type == type && element.storyId == storyId;
    })

    return story;
}

function findStimuliExperiment(experimentId) {
    var experiment = stimuli.experiments.find(function (element) {
        return element.experimentId == experimentId;
    })

    return experiment;
}
